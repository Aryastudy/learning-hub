<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„å¤–è¯­å¬å†™ç«™ - BBC Learning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* å®šä¹‰ç‚¹å‡»åçš„é«˜äº®é¢œè‰² */
        .active-segment { 
            background-color: #fef08a !important; 
            border-color: #facc15 !important; 
            transform: scale(1.02);
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen p-4 font-sans text-gray-900">

    <div class="max-w-2xl mx-auto bg-white shadow-2xl rounded-3xl p-6 mt-8">
        <h1 class="text-2xl font-bold text-indigo-700 mb-6 text-center">ğŸŒ³ BBC å¬å†™ç»ƒä¹ åŠ©æ‰‹</h1>
        
        <div class="bg-gray-100 p-4 rounded-2xl mb-6">
            <audio id="player" class="w-full" controls src="audio.mp3"></audio>
        </div>

        <div class="flex justify-between items-center mb-6 p-4 bg-indigo-50 rounded-2xl">
            <label class="flex items-center cursor-pointer group">
                <input type="checkbox" id="repeatMode" class="w-5 h-5 text-indigo-600 rounded-md border-gray-300">
                <span class="ml-3 font-semibold text-indigo-800">å•å¥å¤è¯»æ¨¡å¼</span>
            </label>
            <button onclick="toggleText()" class="px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-indigo-600 font-medium hover:bg-indigo-600 hover:text-white hover:border-indigo-600 transition-all duration-300 shadow-sm">
                æ˜¾ç¤º/éšè—åŸæ–‡
            </button>
        </div>

        <div id="content" class="space-y-3 transition-opacity duration-300 min-h-[200px]">
            <div class="text-center text-gray-400 py-10 italic">
                ç­‰å¾…åŠ è½½ JSON æ•°æ®ä¸­...
            </div>
        </div>
    </div>

    <script>
        /**
         * ã€å…³é”®ï¼šè¿™é‡Œæ˜¯ä½ è¦æ”¾ AI Studio æ•°æ®çš„åœ°æ–¹ã€‘
         * ç­‰ä½ åœ¨ AI Studio æ‹¿åˆ° BBC çš„è½¬å½•æ•°æ®åï¼Œ
         * ç›´æ¥æŠŠä¸‹é¢è¿™ä¸ª data æ•°ç»„é‡Œçš„å†…å®¹æ›¿æ¢æ‰å³å¯ã€‚
         */
        const data = [
            { "text": "Welcome to 6 Minute English from BBC Learning English.", "start": 0, "end": 4.5 },
            { "text": "Iâ€™m Georgina.", "start": 4.8, "end": 6.2 },
            { "text": "And Iâ€™m Rob.", "start": 6.5, "end": 7.8 },
            { "text": "In this programme, weâ€™re talking about trees.", "start": 8.0, "end": 11.5 },
            { "text": "Specifically, can trees remember things?", "start": 12.0, "end": 15.5 }
        ];

        const player = document.getElementById('player');
        const content = document.getElementById('content');
        const repeatMode = document.getElementById('repeatMode');
        let currentRange = { start: 0, end: 0 };

        // æ¸²æŸ“é¡µé¢å†…å®¹çš„å‡½æ•°
        function renderContent() {
            content.innerHTML = ''; // æ¸…ç©ºæç¤º
            data.forEach((item) => {
                const div = document.createElement('div');
                div.className = "p-4 rounded-xl border-2 border-transparent hover:border-indigo-200 hover:bg-indigo-50 cursor-pointer transition-all duration-200 leading-relaxed text-lg";
                div.innerText = item.text;
                
                div.onclick = () => {
                    currentRange = { start: item.start, end: item.end };
                    player.currentTime = item.start;
                    player.play();
                    
                    // åˆ‡æ¢é«˜äº®çŠ¶æ€
                    document.querySelectorAll('#content div').forEach(el => el.classList.remove('active-segment'));
                    div.classList.add('active-segment');
                };
                content.appendChild(div);
            });
        }

        // åˆå§‹åŒ–æ¸²æŸ“
        renderContent();

        // æ ¸å¿ƒé€»è¾‘ï¼šç›‘å¬æ—¶é—´å®ç°ç²¾å‡†å¤è¯»
        player.addEventListener('timeupdate', () => {
            if (repeatMode.checked && player.currentTime >= currentRange.end) {
                player.currentTime = currentRange.start;
                // æ³¨æ„ï¼šå¦‚æœæƒ³æ— é™å¾ªç¯æ’­æ”¾ï¼Œè¿™é‡Œä¸éœ€è¦å†ç‚¹ play()ï¼Œaudio ä¼šç»§ç»­åœ¨å½“å‰ç‚¹æ’­æ”¾
            }
        });

        // éšè—/æ˜¾ç¤ºåŠŸèƒ½
        function toggleText() {
            content.classList.toggle('opacity-0');
        }
    </script>
</body>
</html>
